{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function getGallery(images) {\n  return images.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n        <div class=\"gallery-item\">\n             <a href=\"${largeImageURL}\" class=\"gallery-link\">\n              <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"gallery-text-container\">\n            <p class=\"gallery-text\"><b>Likes </b>${likes}</p>\n            <p class=\"gallery-text\"><b>Views </b>${views}</p>\n            <p class=\"gallery-text\"><b>Comments </b>${comments}</p>\n            <p class=\"gallery-text\"><b>Downloads </b>${downloads}</p>\n            </div>\n      </div>\n      \n      `\n    )\n    .join('');\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport { getGallery } from './render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { showLoader } from '../main';\nimport { hideLoader } from '../main';\nimport { hideLoadBtn } from '../main';\nimport { showLoadBtn } from '../main';\nimport { showBottomLoader } from '../main';\nimport { inputValue } from '../main';\nimport { gallery } from '../main';\nimport { perPage } from '../main';\n// import { loadBtn } from '../main';\n\nconst key = '23547596-77757707a75e05ac426ee1dd8';\nconst baseURL = 'https://pixabay.com/api/';\nconst loadBtn = document.querySelector('.load');\nlet lightbox;\nlet page = 0;\n\nexport async function getImages(query, page, perPage = 15) {\n  const searchParams = new URLSearchParams({\n    key: key,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: perPage,\n    page: page,\n  }).toString();\n\n  const url = `${baseURL}?${searchParams}`;\n\n  return axios.get(url).then(function (response) {\n    return response.data;\n  });\n}\n\nloadBtn.addEventListener('click', loadHandler);\nexport function loadHandler(event) {\n  showBottomLoader();\n  hideLoadBtn();\n  event.preventDefault();\n  page += 1;\n  getImages(inputValue, page, perPage)\n    .then(images => {\n      hideLoader();\n      gallery.insertAdjacentHTML('beforeend', getGallery(images));\n      lightbox = new SimpleLightbox('.gallery a', {});\n      lightbox.refresh();\n      if (page * perPage > images.totalHits) {\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          messageColor: 'black',\n          color: 'red',\n          position: 'topRight',\n        });\n      } else {\n        showLoadBtn();\n      }\n    })\n    .catch(err => console.log(err));\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages } from './js/pixabay-api';\nimport { getGallery } from './js/render-functions';\n\nconst formInput = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst bottomLoader = document.querySelector('.bottom');\nconst loadBtn = document.querySelector('.load');\nlet lightbox;\nexport const gallery = document.querySelector('.gallery');\nexport let inputValue = '';\nexport let perPage = 15;\nexport let page = 1;\n\nformInput.addEventListener('submit', submitHandler);\nexport async function submitHandler(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  inputValue = form.elements.text.value.toLowerCase();\n  page = 1;\n  if (inputValue === '') {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: 'black',\n      color: 'red',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n  let images = await getImages(inputValue, page, perPage);\n  console.log(images);\n  if (images.total !== 0) {\n    hideLoader();\n    gallery.innerHTML = '';\n    gallery.insertAdjacentHTML('beforeend', getGallery(images));\n    lightbox = new SimpleLightbox('.gallery a', {});\n    lightbox.refresh();\n    loadBtn.style.visibility = 'visible';\n  } else {\n    hideLoader();\n    gallery.innerHTML = '';\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: 'black',\n      color: 'red',\n      position: 'topRight',\n    });\n  }\n}\n\nexport function showLoader() {\n  loader.style.visibility = 'visible';\n}\n\nexport function showBottomLoader() {\n  bottomLoader.style.visibility = 'visible';\n}\n\nexport function hideLoader() {\n  loader.style.visibility = 'hidden';\n  bottomLoader.style.visibility = 'hidden';\n}\n\nexport function hideLoadBtn() {\n  loadBtn.style.visibility = 'hidden';\n}\n\nexport function showLoadBtn() {\n  loadBtn.style.visibility = 'visible';\n}\n"],"names":["getGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","key","baseURL","loadBtn","lightbox","page","getImages","query","perPage","searchParams","url","axios","response","loadHandler","event","showBottomLoader","hideLoadBtn","inputValue","hideLoader","gallery","SimpleLightbox","iziToast","showLoadBtn","err","formInput","loader","bottomLoader","submitHandler","showLoader"],"mappings":"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"}