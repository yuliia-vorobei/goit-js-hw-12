{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst key = '23547596-77757707a75e05ac426ee1dd8';\nconst baseURL = 'https://pixabay.com/api/';\n\nexport async function getImages(query, page, perPage = 15) {\n  const searchParams = new URLSearchParams({\n    key: key,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: perPage,\n    page: page,\n  }).toString();\n\n  const url = `${baseURL}?${searchParams}`;\n\n  return axios.get(url).then(function (response) {\n    return response.data;\n  });\n}\n","export function renderGallery(images) {\n  return images.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n        <div class=\"gallery-item\">\n             <a href=\"${largeImageURL}\" class=\"gallery-link\">\n              <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"gallery-text-container\">\n            <p class=\"gallery-text\"><b>Likes </b>${likes}</p>\n            <p class=\"gallery-text\"><b>Views </b>${views}</p>\n            <p class=\"gallery-text\"><b>Comments </b>${comments}</p>\n            <p class=\"gallery-text\"><b>Downloads </b>${downloads}</p>\n            </div>\n      </div>\n      \n      `\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst formInput = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst bottomLoader = document.querySelector('.bottom');\nconst loadBtn = document.querySelector('.load');\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\nlet inputValue = '';\nlet perPage = 15;\nlet page = 1;\n\nformInput.addEventListener('submit', submitHandler);\nloadBtn.addEventListener('click', loadHandler);\n\nasync function submitHandler(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  inputValue = form.elements.text.value.toLowerCase();\n  page = 1;\n  if (inputValue === '') {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: 'black',\n      color: 'red',\n      position: 'topRight',\n    });\n    return;\n  }\n  showLoader();\n  try {\n    let images = await getImages(inputValue, page, perPage);\n    // console.log(images);\n    if (images.total !== 0) {\n      hideLoader();\n      gallery.innerHTML = '';\n      gallery.insertAdjacentHTML('beforeend', renderGallery(images));\n      lightbox = new SimpleLightbox('.gallery a', {});\n      lightbox.refresh();\n      loadBtn.style.visibility = 'visible';\n    } else {\n      hideLoader();\n      gallery.innerHTML = '';\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'black',\n        color: 'red',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function loadHandler(event) {\n  try {\n    showBottomLoader();\n    hideLoadBtn();\n    event.preventDefault();\n    page += 1;\n\n    const images = await getImages(inputValue, page, perPage);\n    hideLoader();\n    gallery.insertAdjacentHTML('beforeend', renderGallery(images));\n    lightbox = new SimpleLightbox('.gallery a', {});\n    lightbox.refresh();\n\n    if (page * perPage > images.totalHits) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: 'black',\n        color: 'red',\n        position: 'topRight',\n      });\n    } else {\n      showLoadBtn();\n    }\n\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n      const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n      window.scrollBy({\n        top: galleryItemHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport function showLoader() {\n  loader.style.visibility = 'visible';\n}\n\nexport function showBottomLoader() {\n  bottomLoader.style.visibility = 'visible';\n}\n\nexport function hideLoader() {\n  loader.style.visibility = 'hidden';\n  bottomLoader.style.visibility = 'hidden';\n}\n\nexport function hideLoadBtn() {\n  loadBtn.style.visibility = 'hidden';\n}\n\nexport function showLoadBtn() {\n  loadBtn.style.visibility = 'visible';\n}\n"],"names":["key","baseURL","getImages","query","page","perPage","searchParams","url","axios","response","renderGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formInput","loader","bottomLoader","loadBtn","gallery","lightbox","inputValue","submitHandler","loadHandler","event","iziToast","showLoader","hideLoader","SimpleLightbox","error","showBottomLoader","hideLoadBtn","showLoadBtn","galleryItem","galleryItemHeight","err"],"mappings":"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"}